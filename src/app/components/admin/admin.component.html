<div class="mat-h2">Admin Panel </div>

<div class="col-lg-6 m-1">
    <div class="mat-h3"> Manage Users </div>
    <mat-accordion multi>
        <mat-expansion-panel *ngFor='let user of users;let i=index' [expanded]="step === i" (opened)="setStep(i)">
            <mat-expansion-panel-header class="p-2">
                <mat-panel-title class="d-flex justify-content-between">
                    <mat-icon>account_circle</mat-icon>
                    <span class="ml-2"> {{user.username}} </span> <span>{{getBranchNames(user.branches) + ")
                        -"+user.role}}</span>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <form #f='ngForm'>
                <mat-form-field appearance="fill" class="m-2">
                    <mat-label>Username</mat-label>
                    <input matInput [disabled]='true' [(ngModel)]="user.username" name="username">
                </mat-form-field>

                <mat-form-field appearance="fill" class="m-2">
                    <mat-label>Password</mat-label>
                    <input matInput [(ngModel)]="user.password" type="password" name="password">
                </mat-form-field>

                <br>
                <mat-form-field appearance="fill" class="m-2">
                    <mat-label>Role</mat-label>
                    <mat-select [(ngModel)]='user.role' name='role'>
                        <mat-option value="regular"> regular </mat-option>
                        <mat-option value="admin"> admin </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field appearance="fill" class="m-2">
                    <mat-label>Branches</mat-label>
                    <mat-select [(ngModel)]='user.branches' name='branches' multiple
                        [compareWith]="objectComparisonFunction">
                        <mat-option *ngFor="let branch of itemService.branches" [value]="branch">{{branch.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <br>
            </form>
            <div>
                <button mat-raised-button (click)="updateUser(user)" color="primary">Update User
                    Details</button>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>